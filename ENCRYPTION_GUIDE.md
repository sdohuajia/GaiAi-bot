# GAIAI 自动机器人 - 私钥加密功能使用指南

## 🔐 功能概述

为了保护您的私钥安全，本机器人现在支持私钥加密功能。您可以将 `pk.txt` 文件中的私钥进行加密存储，运行时输入密码即可自动解密使用。

## 📁 文件说明

- `pk.txt` - 原始私钥文件（明文）
- `pk_encrypted.txt` - 加密后的私钥文件
- `pk_backup.txt` - 加密时自动创建的备份文件
- `encryptor.js` - 加密工具类
- `encrypt-pk.js` - 加密工具脚本
- `decrypt-pk.js` - 解密工具脚本

## 🚀 使用方法

### 1. 加密私钥

```bash
# 方法一：使用 npm 脚本
npm run encrypt

# 方法二：直接运行脚本
node encrypt-pk.js
```

**步骤：**
1. 确保 `pk.txt` 文件存在并包含您的私钥
2. 运行加密命令
3. 输入加密密码（请牢记此密码）
4. 确认密码
5. 等待加密完成

**加密完成后：**
- 原始 `pk.txt` 会备份为 `pk_backup.txt`
- 加密后的私钥保存在 `pk_encrypted.txt`
- 原始 `pk.txt` 文件会被自动删除（增强安全性）

### 2. 运行机器人（使用加密私钥）

```bash
# 方法一：使用 npm 脚本
npm start

# 方法二：直接运行
node index.js
```

**步骤：**
1. 运行机器人
2. 系统检测到加密文件时会提示输入密码
3. 输入正确的解密密码
4. 机器人自动解密私钥并开始运行

### 3. 解密私钥（可选）

```bash
# 方法一：使用 npm 脚本
npm run decrypt

# 方法二：直接运行脚本
node decrypt-pk.js
```

**步骤：**
1. 运行解密命令
2. 输入解密密码
3. 解密后的私钥会保存到 `pk.txt`

## 🔒 安全特性

- **强加密算法**：使用 AES-256-CBC 加密
- **密码派生**：使用 PBKDF2 算法，100,000 次迭代
- **随机盐值**：每次加密使用不同的随机盐
- **安全存储**：加密文件包含时间戳和元数据

## ⚠️ 重要提醒

1. **密码安全**：请妥善保管您的加密密码，忘记密码将无法恢复私钥
2. **备份文件**：建议保留 `pk_backup.txt` 作为额外备份
3. **文件管理**：加密后可以安全删除原始的 `pk.txt` 文件
4. **密码强度**：建议使用强密码（包含大小写字母、数字、特殊字符）

## 🛠️ 故障排除

### 问题：解密失败
- 检查密码是否正确
- 确认加密文件 `pk_encrypted.txt` 存在且完整

### 问题：找不到加密文件
- 确认 `pk_encrypted.txt` 文件存在
- 检查文件权限

### 问题：原始文件不存在
- 确认 `pk.txt` 文件存在
- 检查文件路径和权限

## 📋 命令总结

```bash
# 加密私钥
npm run encrypt
node encrypt-pk.js

# 解密私钥
npm run decrypt
node decrypt-pk.js

# 运行机器人
npm start
node index.js
```

## 🔄 工作流程

1. **首次使用**：将私钥放入 `pk.txt` → 运行加密工具 → 系统自动删除原始 `pk.txt`
2. **日常使用**：运行机器人 → 输入密码 → 自动解密使用
3. **恢复私钥**：运行解密工具 → 输入密码 → 获得原始 `pk.txt`

---

**注意**：此加密功能是可选的，您也可以继续使用原始的 `pk.txt` 文件（不加密）。
